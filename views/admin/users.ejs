<%- include('../partials/header') -%>
<div class="container mt-5">
  <h1 class="mb-4">Nutzerliste</h1>
  <div class="mb-3">
    <a href="/admin/users/create" class="btn btn-success">Neuen Nutzer erstellen</a>
    <a href="/admin/seedDomains" class="btn btn-primary">
      Domains synchronisieren
    </a>
  </div>
  <table 
    id="userTable" 
    class="table table-striped" 
    data-toggle="table" 
    data-search="true" 
    data-pagination="true">
    <thead>
      <tr>
        <th data-field="id">ID</th>
        <th data-field="benutzername">Benutzername</th>
        <th data-field="email">Email</th>
        <th data-field="isAdmin">Admin</th>
        <th data-field="actions">Aktionen</th>
      </tr>
    </thead>
    <tbody>
      <% users.forEach(user => { %>
      <tr>
        <td><%= user.id %></td>
        <td><%= user.benutzername %></td>
        <td><%= user.email %></td>
        <td><%= user.isAdmin ? 'Ja' : 'Nein' %></td>
        <td>
          <a href="/admin/users/edit/<%= user.id %>" class="btn btn-warning btn-sm">Bearbeiten</a>
          <form action="/admin/users/delete/<%= user.id %>" method="post" style="display:inline;">
            <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Wollen Sie den Nutzer wirklich löschen?');">Löschen</button>
          </form>
        </td>
      </tr>
      <% }); %>
    </tbody>
  </table>
</div>
</body>
</html>
